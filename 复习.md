# 云计算复习笔记
<hr>

[TOC]
### 第1讲 初识云计算
#### 什么是云计算
- 云：规模较大、可伸缩性、边界模糊、飘忽不定，无法确定具体位置
  - 一种服务
  - 提供了一种资源
  - 需要上网
  - 只关心使用，无需关心实现
  - 按需使用，按用付费
  - 多用户共享资源
  - 复杂的管理策略——分配、回收、隔离等等
  - 可靠性保障
- 云计算是一种能够将动态伸缩的虚拟化资源通过互联网以服务的方式提供给用户的计算模式
- 云计算是一种共享的网络交付信息服务的模式，云服务的使用者看到的只有服务本身，而不用关心相关基础设础的具体实现。 
#### 云计算的发展历程
##### 超级计算机 
##### 集群计算  1960
  - 将一组松散的计算机硬件通过软件集成、连接起来，紧密的协作完成计算工作
  - PVM、MPI
  - 相比超级电脑有较高性价比
##### 分布式计算
  - 把需要进行大量计算的工程数据分割成小块，由多台计算机分别计算，然后上传计算结果，将结果统一合并得出最终结果。
  - Remote procedure calls(RPC)
##### 网格计算  1990
  - 将大量异构计算机的未用资源（CPU时间和磁盘时间）作为嵌在分布式系统基础设施中的一个虚拟的计算机集群，为解决大规模的计算问题提供一个模型
  - Globus
##### 效用（公用）计算
  - 提倡一种理想化的企业信息架构，让IT服务模仿公共服务的方式进行，如水、电力、煤气，“用多少付多少”“随需即用”
  - From IBM
##### 云计算
  - 通过网络将庞大的运算处理程序自动拆分为若干个较小的子程序，再交给多个服务器所组成的庞大系统经过搜索、运算分析后将处理结果返回给用户
  - 云：网络
  - Google：GFS、Big Table、Map Reduce
#### 云计算的动因
- 芯片与硬件技术
  - 摩尔定律
  集成电路芯片上所集成的电路数目，每隔18个月就翻一倍，同时性能也提升一倍
  - 硬件能力↑ 成本↓  独立运作的公司集中客观的硬件能力->规模效益
- 资源虚拟化
  - 资源在云端，需要统一管理
  - 异构硬件、兼容性问题
  - 虚拟化技术
    - 开发人员只需关注业务逻辑，无需考虑底层资源的供给与调度问题
    - 硬件资源可以被细粒度的分割和管理，以服务的方式提供硬件和软件资源成为可能
    - 单点崩溃不会影响全局
    - 易创建性->使用更加方便，提高自身可靠性和可用性
- 面向服务的架构SOA
  - 开放式数据模型
  - 统一通信标准
  - 更加丰富的服务
  - 更加松散耦合、灵活的IT架构
  - 转变了人们对IT系统的认识 
- 软件及服务Saas
  - 转变了人们使用服务的方式
  - 使得终端用户熟悉服务的交互模式
  - 改变了IT界的商业模式
  - 大公司->基础设施，小公司->创新->挖掘潜力市场
  ![](.img/changwei.png)
- 互联网技术
  - 基础设施
  - 多种接入方式
  - 更加广阔的覆盖
  - 带宽和可靠性↑
  - 使得IT新模式的稳定性、可靠性、安全性、可用性、灵活性、可管理性、自动化程度、节能环保等得到保障
- Web2.0技术
  - 用户从信息的获得者变成信息的贡献者
  - 博客（微博）、内容聚合、百科全书（Wiki）、社交网络、对等网络（P2P）
  - 富互联网应用（Rich Internet Application）成为网络应用发展的趋势
  - 改变了人们的生活方式
  - 为云计算提出了内在需求
  > 和Web1.0的区别？
#### 业界主流的云计算产品
#### 典型的云计算应用/云服务
Google
12306
VMware
GAE/SAE
![](.img/anli.png)
#### 深入了解现象背后“计算机”干了什么
#### 了解VMware、AWS、SAE

<hr>

### 第3讲 云计算与服务
#### 服务的概念
通过一系列活动，而不是实物，满足对方的需求
- 以用户需求的满意度为核心
- 活动为主，实物为辅或无实物

**特点**
- 针对个性化需求
- 顾客参与度提升
- 更大的价值体现
- 以顾客的满意度衡量
#### 云的技术范畴
#### 云服务的基本层次
- SaaS  应用软件
面向最终用户
- PaaS  开发软件或支撑软件
面向应用软件
- IaaS  基础硬件
面向软件
![](.img/aaS.png)
#### 云的特征
- 硬件和软件都是资源
- 资源可以根据需要进行动态扩展与配置
- 按用计费、无需管理
- 物理上分布式共享，逻辑上以单一整体呈现

#### 云的优势
- 优化产业成本
  - 硬件->电力、散热
  - 分散的、高能耗模式->集中的、资源友好模式
  - 自给自足资源作坊->规模效应的工业化资源工厂
- 推进专业分工
  - 大型云计算厂商
  - 科研团队 -> 硬件技术革新
  - 维护管理团队和配套软件
  - 新产业契机
- 提高资源利用率
  - 更高效解决常规业务
  - 更好的应对突发任务或事件
  - 更加平衡的资源分配和负载
- 减少初期投资
  - 更少的IT基础设施投入 
  - 更少的软件投入 
  - 更少的人力投入 
  - 更短的培训周期 
  - 更灵活的转型支持
- 降低管理开销

#### 什么是DevOps，DevOps有什么作用
![](.img/DevOps.png)
- 服务需求：提高不同团队间的协同效率，降低成本
- 主要目标：全面监控+自动化
![](.img/nlh.png)
- 实施：组织、技术、流程、文化
![](.img/devops_ss.png)
- 动因
  - 开发≠上线
  - 配套技术的发展：微服务、容器
  - 敏捷开发的诉求（用户的压力）
  - 开发的自动化（IDE环境强大）
- 核心功能
  - 自动打包
  - 自动升级部署
  - 用例管理和自动执行
  - 用例开发框架
  - 用例执行框架

#### 什么是中台，中台有什么作用，主要中台有哪些
- 中台不是：中间逻辑层/PaaS/中间件/平台
- 中台就是将“后台”中那些针对技术，业务，组织的通用“模块/服务”从原来特定的项目中抽离出来，并且使之能够成为一个自治的服务复用到多个项目中提供给更多的“前台”使用
- 对后台的进一步抽象和拆分
- 主要中台
  - 业务中台
  零售行业、线上线下、多渠道多模式
  会员管理、订单管理...
  - 应用中台
  存储、音视频会议系统、电子发票...
  - 技术中台
  数据存储与管理、数据分析处理、功能API、消息发布订阅...
  - 数据中台
  业务数据、分析数据、管理数据、日志数据...

 <hr> 

### 第4讲 典型云服务
#### Iaas的基本功能
- 基础设施层服务
  - 经过虚拟化后的硬件资源和相关管理功能的集合
  - 硬件资源：计算、存储和网络等资源
  - 通过虚拟化技术对物理资源进行抽象
  - 内部流程自动化
  - 资源管理优化
  - 对外提供动态、灵活的资源服务

##### 核心功能
  1. 资源抽象 
  2. 资源监控 
  3. 负载管理 
  4. 数据管理 
  5. 资源部署 
  6. 安全管理 
  7. 计费管理

###### 资源抽象
- 对硬件进行虚拟化
- 基于硬件驱动/接口
- 屏蔽硬件产品差异
  - 向下，针对不同硬件产品建立不同的适配器
- 对硬件进行统一的管理逻辑
  - 向上，提供统一的标准的管理逻辑接口
- 核心问题：对资源进行粒度划分并管理
  - 单一资源的粒度划分
  - 多种资源的组合打包
- 粒度分级概念 
  -  虚拟机（Virtual Machine）
  - 集群（Cluster）
  - 虚拟数据中心（Virtual Data Center）
  - 云（Cloud）
- 将物理资源放入统一的资源池中 – 对资源池进行管理并呈现给用户
###### 资源监控
- 保障基础设施层高效工作的关键 
- 是负载管理的前提 
- 调用资源本身的监控接口
- 对不同资源采取不同监控方式 
  - 计算单元——使用率 
  - 存储单元——使用率、读写操作 
  - 网络—实时的输入、输出及路由状态
- 不同的监控层次 
  - 根据资源粒度层次 
  - 上级监控结果是下级监控结果的整合 
- 不同的监控对象 
  - 物理单元 
  - 逻辑单元
  - 解决方案 
- 定义监控事件和触发规则 
  - 业务逻辑的体现 
  - 当xxxx时，需要做xxxx事情 
  - 自动化管控的实现基础
###### 负载管理
- 负载过低 -> 资源浪费
- 负载过高 -> 上层服务受到影响
- 负载均匀
- 避免复杂过高
![](.img/fuzai1.png)
![](.img/fuzai2.png)
- 关闭的越多
  - 资源浪费越少（电力等）
  - 平均负载增加
  - 性能影响越大
- 负载平衡与优化问题
  - 性能
  - 资源
  - 优化算法
###### 数据管理
- 多种数据并存
  - 结构化XML数据
  - 非结构化二进制数据
  - 关系型数据库数据
- 物理上分布式存储
- 数据的完整性、可靠性、可管理性提出挑战
  - 完整性
    - 数据的状态在任何时候都是确定的
    - 可以通过操作恢复到一致的状态
    - 任何时候都能够被正确的读
    - 写操作进行适当的同步
  - 可靠性
    - 数据的损坏和丢失几率降到最低
    - 冗余备份与恢复
  - 可管理性
    - 提供相应的操作支持粗粒度、逻辑简单的管理
###### 资源部署
- 通过自动化部署流程将资源交付给上层应用
- 使基础设施服务变得可用的过程
- 分次部署
  - 初期，虚拟化硬件资源就绪时进行初始化
  - 应用运行时，进行动态部署
- 部署方式随基础设施层构建技术不同有巨大差异
- 虚拟化技术简化了资源部署的过程

**典型场景**
- 支持动态资源可伸缩性
  - 用户的服务工作负载过高时，可以通过增加服务实例的方式降低负载
  - 云自动分配所需资源
  - 例如：网络游戏用户激增
- 故障恢复与硬件维护
  - 多节点的数据冗余—鸡蛋放在不同的篮子中
  - 快速复制环境完成物理迁移
###### 安全管理
- 保证基础设施资源被合法地访问和使用
- 合法性
正确的用户、程序、分配
- 云数据的安全
操作审查、授权、追踪机制
- 环境更加开放
- 用户不保有数据 
- 云内部破坏力更大 
- 影响云安全的因素 
  - 恶意程序 
  - 硬件故障 
  - 云管理人员泄露数据 
  - 外在因素（灾害、盗窃）
###### 计费管理
- 变买为租
- 按量、按时间计费
- 使用情况监控
- 用户任务的多种实现方式

##### 实现步骤
1. 总体设计
2. 服务流程
3. 规划阶段
4. 部署阶段
5. 运行阶段

##### 总体设计
- 建立物理设施
- 虚拟化
- 建立管理系统
- 建立服务
![](.img/Iaas_design.png)
- 虚拟化平台
暴露统一接口
- 虚拟化集成管理器
  - 提供基础设施层管理的核心功能
  - 调用虚拟化平台提供的接口
  - 管理虚拟的硬件资源
- 基础设施层服务
  - 与虚拟化集成管理器提供的功能相对应
  - 用户获得接触设施层资源的接口
#### Paas的基本功能
#### Saas的典型应用

<hr>

### 第5讲  虚拟化技术
#### 虚拟化的概念
#### 服务器虚拟化的特性
#### 服务器虚拟化的关键技术
#### 其他虚拟化的相关技术
#### 典型虚拟机
#### 虚拟化与云计算的关系


<hr>

### 第6讲 虚拟化资源管理
#### AWS模式是什么，有什么优点？
#### Iaas模式核心需求有哪些
#### Open Stack都包含哪些核心项目，作用是什么
#### 镜像和实例有什么区别和联系
#### Nova有哪些核心模块，工作过程是什么
#### Keystone权限控制过程是什么
#### Quantum原理是什么
#### Cinder存储的机制是什么
#### Swift的核心概念有哪些
#### Swift的组件有哪些，都有什么作用

<hr>

### 第7讲 云存储
#### 大规模数据存储面临的新问题与挑战
#### 索引技术
#### GFS体系结构
#### 云存储应用的特点

<hr>

### 第8讲 批量计算
#### 并行化思想
#### 批量计算特点
#### Map Reduce算法的架构
#### Map Reduce算法设计思想
#### 算法调优
#### Map Reduce运行过程中的各种参数及其作用
#### 参数调优
#### 联系尝试写Map Reduce程序

<hr>

### 第9讲 流式计算与图数据计算
#### 流式计算与批量计算的区别
#### 流式计算的关键要素
#### 数据分发机制
#### 运用流式计算方法解决实际问题
#### 图的切分方式
#### BSP计算模式
#### 图数据计算的并行思想
#### 运用图数据计算方法解决实际问题

<hr>

### 第11讲 分布式处理框架
#### Hadoop项目的由来
#### HDFS的体系结构
#### HDFS的运行机制
#### Hadoop中Map Reduce的实现机制
#### Htable的数据结构
#### Hbase的运行机制
#### Yarn对Hadoop的核心改进
#### Spark架构及运行机制
#### Storm架构及运行机制
#### Kafka架构及运行机制
#### Pregel架构及运行机制
#### 各种分布式处理框架的异同点

<hr>

### 第12讲 控制策略与保障技术1
#### 分布式处理的不一致情况有哪些
#### 有哪些原因造成了分布式处理的不一致
#### quorum protocol是什么
#### 主从机制下主和从的任务特点是什么
#### 数据库主从机制有哪些
#### Paxos算法过程是什么
#### PBFT算法过程是什么
#### Gossip算法过程和典型架构是什么

<hr>

### 第13讲 控制策略与保障技术2
#### GFS容错机制
#### HDFS容错机制
#### 内存数据库容错机制
#### 计算框架容错机制
#### Ring算法是什么，有哪些改进
#### Zookeeper的实现机制是什么
#### 时间片机制有什么用，chubby释放和重连机制是什么
#### 多租户的概念是什么

<hr>

### 第14讲 高级话题
#### 什么是云安全
#### 云计算的安全威胁
#### 云计算的安全优势
#### 物联网与云计算的关系
#### 什么是主机，什么是终端
#### 大型数据中心构建和管理主要需要做哪些事
#### 云计算中新人机制如何构建
#### NoSQL相较于传统数据库的特点
#### 常见的NoSQL数据类型和代表产品



<hr>

### 第1讲
####  为什么有云计算
- 硬件需求
  - 变买为租
    - 成本压力
    - 只需要使用权，不注重所有权
  - 能力弹性
   - 硬件能力需求是弹性的
   - 希望能够按需扩展
  - 可靠性保障
    - 需要可靠但自身缺少相关保障技术
  - 管理维护
    - 需要管理维护但又无法承担成本
- 平台需求（开发者需求）
  - 变买为租
    - 成本压力
    - 只需要使用权，不注重所有权
  - 配置管理
    - 安装配置过程繁琐
    - 各种开发环境的冲突
    - 需要平台式一站式服务
  - 培训
  - 快速应对应用使用者的个性化新应用需求
- 应用需求
  - 更多的应用选择
    - 个性化
    - 需要更多提供商参与
  - 更方便的应用获取渠道
    - 应用商店
    - 试用
  - 参考信息
    - 他人的评价
    - 购买量
    - 开发者口碑

#### 分类  
- 服务类型
  - 基础设施云
  - 平台云
  - 应用云

  |     分类    |       服务类型          | 灵活性 | 难易程度 |
  | :--------: | :--------------------:  | :----: | :-----: |
  | 基础设施云  | 接近于原始的计算存储能力 |   高   |   难    |
  |   平台云    |    应用的托管环境       |   中   |   中    |
  |   应用云    |    特定功能的应用       |   低   |   易    |

 
- 服务方式
  - 公有云
  - 私有云
  - 混合云

![](.img/fenlei.png)
![](.img/fenlei1.png)
### 第3讲
#### 交互平台的本质
- 建立一个池，对池中资源放入取出
- 服务可以重复利用           ->取出和放回 
- 服务能力单位时间具有排他性  ->资源竞争
- 宏观上服务能力无限 ->通过池弹性扩展
- 微观上服务能力有限 ->分配回收管控

#### 交互平台的共性问题
- 服务（包括资源）的描述与访问问题——虚拟化
- 大规模的处理的效率问题——分布式计算
- 资源的分配回收及其他管控问题——管控策略

#### 云与服务
- 云计算——新的服务模式及使能技术
  - 资源服务化
  - 虚拟化的计算和存储资源
  - 运行应用的平台
  - 种类繁多的互联网应用
  - 服务的可伸缩性、可用性和安全性
云计算通过不同层次的架构实现不同类型的服务以及满足用户对这些服务的各种需求。
- 云是一种平台模式，把资源汇聚，然后再以服务的方式对外提供
- 云计算技术是云这种平台模式的使能技术
狭义：面向IT资源服务
广义：广泛的资源服务